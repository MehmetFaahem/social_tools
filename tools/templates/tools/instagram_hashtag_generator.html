{% extends 'tools/base.html' %} {% block title %}Instagram Hashtag Generator{%
endblock %} {% block content %}
<div class="bg-white shadow-lg rounded-lg p-8 max-w-md mx-auto">
  <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">
    Instagram Hashtag Generator
  </h2>
  <form id="hashtag-form" method="post" class="space-y-4">
    {% csrf_token %}
    <input
      type="url"
      id="image_url"
      name="image_url"
      class="w-full p-3 border rounded focus:outline-none focus:border-blue-500"
      placeholder="Enter Image URL"
      required
    />
    <button
      type="submit"
      class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition"
    >
      Generate Hashtags
    </button>
  </form>
  <div id="hashtags" class="mt-4 text-center text-blue-600"></div>
</div>

<script>
  document.getElementById("hashtag-form").onsubmit = async function (event) {
    event.preventDefault();
    const formData = new FormData(event.target);
    const response = await fetch("{% url 'instagram_hashtag_generator' %}", {
      method: "POST",
      headers: { "X-CSRFToken": "{{ csrf_token }}" },
      body: formData,
    });
    const data = await response.json();
    document.getElementById("hashtags").innerHTML = data.hashtags
      ? `<p>${data.hashtags.join(", ")}</p>`
      : `<p class="text-red-600">${data.error}</p>`;
  };
</script>
{% endblock %}
