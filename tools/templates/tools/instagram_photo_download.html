{% extends 'tools/base.html' %} {% block title %}Instagram Photo Download{%
endblock %} {% block content %}
<div class="bg-white shadow-lg rounded-lg p-8 max-w-md mx-auto">
  <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">
    Instagram Photo Download
  </h2>
  <form id="photo-form" method="post" class="space-y-4">
    {% csrf_token %}
    <input
      type="url"
      id="url"
      name="url"
      class="w-full p-3 border rounded focus:outline-none focus:border-blue-500"
      placeholder="Enter Instagram photo URL"
      required
    />
    <button
      type="submit"
      class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition"
    >
      Download Photo
    </button>
  </form>
  <div id="download-link" class="mt-4 text-center text-blue-600"></div>
</div>

<script>
  document.getElementById("photo-form").onsubmit = async function (event) {
    event.preventDefault();
    const formData = new FormData(event.target);
    const response = await fetch("{% url 'instagram_photo_download' %}", {
      method: "POST",
      headers: { "X-CSRFToken": "{{ csrf_token }}" },
      body: formData,
    });
    const data = await response.json();
    document.getElementById("download-link").innerHTML = data.download_link
      ? `<a href="${data.download_link}" target="_blank" class="underline">Download Photo</a>`
      : `<p class="text-red-600">${data.error}</p>`;
  };
</script>
{% endblock %}
